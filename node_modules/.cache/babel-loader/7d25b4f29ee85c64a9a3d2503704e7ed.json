{"ast":null,"code":"import { b2BodyDef, b2BodyType, b2CircleShape, b2FixtureDef, b2PolygonShape, b2World } from \"box2d.ts\";\nimport { World } from \"flat-ecs\";\nimport { InputEvent, PolygonBatch, ShapeRenderer, ViewportInputHandler } from \"gdxts\";\nimport { Constants } from \"../Constant\";\nimport { PhysicDebugSystem } from \"../RenderSystem/physicDebugSystem\";\nconst MAP_HEIGHT = 1000; // map height\n\nexport const createGameScreen = async (assetManager, viewport) => {\n  const createGround = (physicWorld, x, y, width, height) => {\n    const bodyDef = new b2BodyDef();\n    bodyDef.type = b2BodyType.b2_staticBody;\n    bodyDef.position.Set(x, y);\n    const body = physicWorld.CreateBody(bodyDef);\n    const shape = new b2PolygonShape();\n    shape.SetAsBox(width / 2, height / 2, {\n      x: width / 2,\n      y: -height / 2\n    });\n    body.SetUserData(\"ground\");\n    body.CreateFixture(shape);\n  };\n\n  const createBall = (physicWorld, x, y, radius) => {\n    const bodyDef = new b2BodyDef();\n    bodyDef.type = b2BodyType.b2_dynamicBody;\n    bodyDef.position.Set(x + radius / 2, y + radius / 2);\n    const circle = new b2CircleShape();\n    circle.m_radius = radius;\n    const fixtureDef = new b2FixtureDef();\n    fixtureDef.shape = circle;\n    fixtureDef.restitution = 0.25; // bounce bird\n\n    fixtureDef.friction = 1;\n    fixtureDef.shape = circle;\n    const body = physicWorld.CreateBody(bodyDef);\n    body.CreateFixture(fixtureDef);\n    body.SetUserData(\"ball\");\n    return body;\n  };\n\n  const createPerson = (physicWorld, x, y, width, height) => {\n    const bodyDef = new b2BodyDef();\n    bodyDef.type = b2BodyType.b2_dynamicBody;\n    bodyDef.position.Set(x + width / 2, y + height / 2);\n    const body = physicWorld.CreateBody(bodyDef);\n    const shape = new b2PolygonShape();\n    shape.SetAsBox(width / 2, height / 2, {\n      x: width / 2,\n      y: -height / 2\n    });\n    body.SetUserData(\"person\");\n    body.CreateFixture(shape);\n    return body;\n  };\n\n  const gl = viewport.getContext();\n  const camera = viewport.getCamera();\n  const batch = new PolygonBatch(gl);\n  const shapeRenderer = new ShapeRenderer(gl);\n  gl.clearColor(0, 0, 0, 1);\n  const world = new World();\n  const physicWorld = new b2World({\n    x: 0,\n    y: -10\n  });\n  const mapData = await fetch(\"./datas.tmj\").then(res => res.json());\n  const groundData = mapData.layers.find(w => w.name === \"Ground\").objects;\n  const personTeam1Data = mapData.layers.find(p => p.name === \"Team1\").objects;\n  const personTeam2Data = mapData.layers.find(p => p.name === \"Team2\").objects;\n  const ball = mapData.layers.find(b => b.name === \"ball\").objects;\n  let Team1 = [];\n  let Team2 = [];\n  let balls = [];\n\n  for (let box of ball) {\n    balls.push(createBall(physicWorld, box.x / Constants.METER_TO_PHYSIC_WORLD, (MAP_HEIGHT - box.y) / Constants.METER_TO_PHYSIC_WORLD, 0.5));\n  }\n\n  for (let ground of groundData) {\n    createGround(physicWorld, ground.x / Constants.METER_TO_PHYSIC_WORLD, (MAP_HEIGHT - ground.y) / Constants.METER_TO_PHYSIC_WORLD, ground.width / Constants.METER_TO_PHYSIC_WORLD, ground.height / Constants.METER_TO_PHYSIC_WORLD);\n  }\n\n  for (let person1 of personTeam1Data) {\n    console.log(person1);\n    Team1.push(createPerson(physicWorld, person1.x / Constants.METER_TO_PHYSIC_WORLD, (MAP_HEIGHT - person1.y) / Constants.METER_TO_PHYSIC_WORLD, person1.width / Constants.METER_TO_PHYSIC_WORLD, person1.height / Constants.METER_TO_PHYSIC_WORLD));\n  }\n\n  for (let person2 of personTeam2Data) {\n    Team2.push(createPerson(physicWorld, person2.x / Constants.METER_TO_PHYSIC_WORLD, (MAP_HEIGHT - person2.y) / Constants.METER_TO_PHYSIC_WORLD, person2.width / Constants.METER_TO_PHYSIC_WORLD, person2.height / Constants.METER_TO_PHYSIC_WORLD));\n  }\n\n  const inputHandle = new ViewportInputHandler(viewport);\n  inputHandle.addEventListener(InputEvent.TouchStart, () => {\n    ball[1].ApplyLinearImpulseToCenter({\n      x: 5,\n      y: 5\n    }, true);\n  });\n  world.register(\"gl\", gl);\n  world.register(\"assetManager\", assetManager);\n  world.register(\"viewport\", viewport);\n  world.register(\"batch\", batch);\n  world.register(\"physicWorld\", physicWorld);\n  world.register(\"shapeRenderer\", shapeRenderer);\n  world.addSystem(new PhysicDebugSystem(), true);\n  return {\n    update(delta) {\n      gl.clear(gl.COLOR_BUFFER_BIT);\n      batch.setProjection(camera.combined);\n      shapeRenderer.setProjection(camera.combined);\n      world.setDelta(delta);\n      world.processActiveSystem();\n      world.processPassiveSystem();\n      physicWorld.Step(delta, 8, 3);\n      shapeRenderer.begin(); // for (let ground of groundData) {\n      //   shapeRenderer.rect(\n      //     true,\n      //     ground.x * Constants.METER_TO_PHYSIC_WORLD,\n      //     ground.y * Constants.METER_TO_PHYSIC_WORLD,\n      //     ground.width * Constants.METER_TO_PHYSIC_WORLD,\n      //     ground.height * Constants.METER_TO_PHYSIC_WORLD,\n      //     Color.BLUE\n      //   );\n      // }\n      // for (let i = 0; i < Team1.length; i++) {\n      //   shapeRenderer.rect(\n      //     true,\n      //     Team1[i].GetPosition().x * Constants.METER_TO_PHYSIC_WORLD,\n      //     Team1[i].GetPosition().y * Constants.METER_TO_PHYSIC_WORLD,\n      //     Constants.PERSON_WIDTH * Constants.METER_TO_PHYSIC_WORLD,\n      //     Constants.PERSON_HEIGHT * Constants.METER_TO_PHYSIC_WORLD,\n      //     Color.RED\n      //   );\n      // }\n      // for (let person2 of personTeam2Data) {\n      //   shapeRenderer.rect(\n      //     true,\n      //     person2.x * Constants.METER_TO_PHYSIC_WORLD,\n      //     person2.y * Constants.METER_TO_PHYSIC_WORLD,\n      //     Constants.PERSON_WIDTH * Constants.METER_TO_PHYSIC_WORLD,\n      //     Constants.PERSON_HEIGHT * Constants.METER_TO_PHYSIC_WORLD,\n      //     Color.RED\n      //   );\n      // }\n\n      shapeRenderer.end();\n    },\n\n    dispose() {}\n\n  };\n};","map":{"version":3,"names":["b2BodyDef","b2BodyType","b2CircleShape","b2FixtureDef","b2PolygonShape","b2World","World","InputEvent","PolygonBatch","ShapeRenderer","ViewportInputHandler","Constants","PhysicDebugSystem","MAP_HEIGHT","createGameScreen","assetManager","viewport","createGround","physicWorld","x","y","width","height","bodyDef","type","b2_staticBody","position","Set","body","CreateBody","shape","SetAsBox","SetUserData","CreateFixture","createBall","radius","b2_dynamicBody","circle","m_radius","fixtureDef","restitution","friction","createPerson","gl","getContext","camera","getCamera","batch","shapeRenderer","clearColor","world","mapData","fetch","then","res","json","groundData","layers","find","w","name","objects","personTeam1Data","p","personTeam2Data","ball","b","Team1","Team2","balls","box","push","METER_TO_PHYSIC_WORLD","ground","person1","console","log","person2","inputHandle","addEventListener","TouchStart","ApplyLinearImpulseToCenter","register","addSystem","update","delta","clear","COLOR_BUFFER_BIT","setProjection","combined","setDelta","processActiveSystem","processPassiveSystem","Step","begin","end","dispose"],"sources":["D:/projects/test-game/src/GameScreen/GameScreen.ts"],"sourcesContent":["import {\r\n  b2Body,\r\n  b2BodyDef,\r\n  b2BodyType,\r\n  b2CircleShape,\r\n  b2FixtureDef,\r\n  b2PolygonShape,\r\n  b2ShapeType,\r\n  b2World,\r\n} from \"box2d.ts\";\r\nimport { World } from \"flat-ecs\";\r\nimport {\r\n  AssetManager,\r\n  Color,\r\n  InputEvent,\r\n  InputHandler,\r\n  PolygonBatch,\r\n  Screen,\r\n  ShapeRenderer,\r\n  Vector2,\r\n  Viewport,\r\n  ViewportInputHandler,\r\n} from \"gdxts\";\r\nimport { Constants } from \"../Constant\";\r\nimport { PhysicDebugSystem } from \"../RenderSystem/physicDebugSystem\";\r\n\r\nconst MAP_HEIGHT = 1000; // map height\r\nexport const createGameScreen = async (\r\n  assetManager: AssetManager,\r\n  viewport: Viewport\r\n): Promise<Screen> => {\r\n  const createGround = (\r\n    physicWorld: b2World,\r\n    x: number,\r\n    y: number,\r\n    width: number,\r\n    height: number\r\n  ) => {\r\n    const bodyDef = new b2BodyDef();\r\n    bodyDef.type = b2BodyType.b2_staticBody;\r\n    bodyDef.position.Set(x, y);\r\n    const body = physicWorld.CreateBody(bodyDef);\r\n    const shape = new b2PolygonShape();\r\n    shape.SetAsBox(width / 2, height / 2, { x: width / 2, y: -height / 2 });\r\n    body.SetUserData(\"ground\");\r\n    body.CreateFixture(shape);\r\n  };\r\n  const createBall = (\r\n    physicWorld: b2World,\r\n    x: number,\r\n    y: number,\r\n    radius: number\r\n  ): b2Body => {\r\n    const bodyDef = new b2BodyDef();\r\n    bodyDef.type = b2BodyType.b2_dynamicBody;\r\n    bodyDef.position.Set(x + radius / 2, y + radius / 2);\r\n    const circle = new b2CircleShape();\r\n    circle.m_radius = radius;\r\n    const fixtureDef = new b2FixtureDef();\r\n    fixtureDef.shape = circle;\r\n    fixtureDef.restitution = 0.25; // bounce bird\r\n    fixtureDef.friction = 1;\r\n    fixtureDef.shape = circle;\r\n\r\n    const body = physicWorld.CreateBody(bodyDef);\r\n    body.CreateFixture(fixtureDef);\r\n    body.SetUserData(\"ball\");\r\n    return body;\r\n  };\r\n\r\n  const createPerson = (\r\n    physicWorld: b2World,\r\n    x: number,\r\n    y: number,\r\n    width: number,\r\n    height: number\r\n  ): b2Body => {\r\n    const bodyDef = new b2BodyDef();\r\n    bodyDef.type = b2BodyType.b2_dynamicBody;\r\n    bodyDef.position.Set(x + width / 2, y + height / 2);\r\n    const body = physicWorld.CreateBody(bodyDef);\r\n    const shape = new b2PolygonShape();\r\n    shape.SetAsBox(width / 2, height / 2, { x: width / 2, y: -height / 2 });\r\n    body.SetUserData(\"person\");\r\n    body.CreateFixture(shape);\r\n    return body;\r\n  };\r\n\r\n  const gl = viewport.getContext();\r\n  const camera = viewport.getCamera();\r\n  const batch = new PolygonBatch(gl);\r\n  const shapeRenderer = new ShapeRenderer(gl);\r\n  gl.clearColor(0, 0, 0, 1);\r\n\r\n  const world = new World();\r\n  const physicWorld = new b2World({\r\n    x: 0,\r\n    y: -10,\r\n  });\r\n  const mapData = await fetch(\"./datas.tmj\").then((res) => res.json());\r\n  const groundData = mapData.layers.find(\r\n    (w: any) => w.name === \"Ground\"\r\n  ).objects;\r\n  const personTeam1Data = mapData.layers.find(\r\n    (p: any) => p.name === \"Team1\"\r\n  ).objects;\r\n  const personTeam2Data = mapData.layers.find(\r\n    (p: any) => p.name === \"Team2\"\r\n  ).objects;\r\n  const ball = mapData.layers.find((b: any) => b.name === \"ball\").objects;\r\n  let Team1: b2Body[] = [];\r\n  let Team2: b2Body[] = [];\r\n  let balls: b2Body[] = [];\r\n\r\n  for (let box of ball) {\r\n    balls.push(\r\n      createBall(\r\n        physicWorld,\r\n        box.x / Constants.METER_TO_PHYSIC_WORLD,\r\n        (MAP_HEIGHT - box.y) / Constants.METER_TO_PHYSIC_WORLD,\r\n        0.5\r\n      )\r\n    );\r\n  }\r\n\r\n  for (let ground of groundData) {\r\n    createGround(\r\n      physicWorld,\r\n      ground.x / Constants.METER_TO_PHYSIC_WORLD,\r\n      (MAP_HEIGHT - ground.y) / Constants.METER_TO_PHYSIC_WORLD,\r\n      ground.width / Constants.METER_TO_PHYSIC_WORLD,\r\n      ground.height / Constants.METER_TO_PHYSIC_WORLD\r\n    );\r\n  }\r\n  for (let person1 of personTeam1Data) {\r\n    console.log(person1);\r\n    Team1.push(\r\n      createPerson(\r\n        physicWorld,\r\n        person1.x / Constants.METER_TO_PHYSIC_WORLD,\r\n        (MAP_HEIGHT - person1.y) / Constants.METER_TO_PHYSIC_WORLD,\r\n        person1.width / Constants.METER_TO_PHYSIC_WORLD,\r\n        person1.height / Constants.METER_TO_PHYSIC_WORLD\r\n      )\r\n    );\r\n  }\r\n  for (let person2 of personTeam2Data) {\r\n    Team2.push(\r\n      createPerson(\r\n        physicWorld,\r\n        person2.x / Constants.METER_TO_PHYSIC_WORLD,\r\n        (MAP_HEIGHT - person2.y) / Constants.METER_TO_PHYSIC_WORLD,\r\n        person2.width / Constants.METER_TO_PHYSIC_WORLD,\r\n        person2.height / Constants.METER_TO_PHYSIC_WORLD\r\n      )\r\n    );\r\n  }\r\n  const inputHandle = new ViewportInputHandler(viewport);\r\n  inputHandle.addEventListener(InputEvent.TouchStart, () => {\r\n    ball[1].ApplyLinearImpulseToCenter(\r\n      {\r\n        x: 5,\r\n        y: 5,\r\n      },\r\n      true\r\n    );\r\n  });\r\n\r\n  world.register(\"gl\", gl);\r\n  world.register(\"assetManager\", assetManager);\r\n  world.register(\"viewport\", viewport);\r\n  world.register(\"batch\", batch);\r\n  world.register(\"physicWorld\", physicWorld);\r\n  world.register(\"shapeRenderer\", shapeRenderer);\r\n\r\n  world.addSystem(new PhysicDebugSystem(), true);\r\n\r\n  return {\r\n    update(delta: number) {\r\n      gl.clear(gl.COLOR_BUFFER_BIT);\r\n      batch.setProjection(camera.combined);\r\n      shapeRenderer.setProjection(camera.combined);\r\n      world.setDelta(delta);\r\n      world.processActiveSystem();\r\n      world.processPassiveSystem();\r\n      physicWorld.Step(delta, 8, 3);\r\n      shapeRenderer.begin();\r\n\r\n      // for (let ground of groundData) {\r\n      //   shapeRenderer.rect(\r\n      //     true,\r\n      //     ground.x * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     ground.y * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     ground.width * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     ground.height * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     Color.BLUE\r\n      //   );\r\n      // }\r\n\r\n      // for (let i = 0; i < Team1.length; i++) {\r\n      //   shapeRenderer.rect(\r\n      //     true,\r\n      //     Team1[i].GetPosition().x * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     Team1[i].GetPosition().y * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     Constants.PERSON_WIDTH * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     Constants.PERSON_HEIGHT * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     Color.RED\r\n      //   );\r\n      // }\r\n\r\n      // for (let person2 of personTeam2Data) {\r\n      //   shapeRenderer.rect(\r\n      //     true,\r\n      //     person2.x * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     person2.y * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     Constants.PERSON_WIDTH * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     Constants.PERSON_HEIGHT * Constants.METER_TO_PHYSIC_WORLD,\r\n      //     Color.RED\r\n      //   );\r\n      // }\r\n      shapeRenderer.end();\r\n    },\r\n    dispose(): void {},\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}