{"ast":null,"code":"import _initializerDefineProperty from \"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _applyDecoratedDescriptor from \"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"D:/projects/test-game/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6;\n\nimport { System, Inject } from \"flat-ecs\";\nimport { Constants } from \"../Constant\";\nimport { createBall } from \"./utils\";\nexport let TurnOfTeam = (_dec = Inject(\"StateGame\"), _dec2 = Inject(\"ballsTeam1\"), _dec3 = Inject(\"ballsTeam2\"), _dec4 = Inject(\"physicWorld\"), _dec5 = Inject(\"originPosition\"), _dec6 = Inject(\"mapData\"), (_class = class TurnOfTeam extends System {\n  constructor() {\n    super(...arguments);\n\n    _initializerDefineProperty(this, \"StateGame\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"ballsTeam1\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"ballsTeam2\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"physicWorld\", _descriptor4, this);\n\n    _initializerDefineProperty(this, \"originPosition\", _descriptor5, this);\n\n    _initializerDefineProperty(this, \"mapData\", _descriptor6, this);\n\n    this.MAP_HEIGHT = 1000;\n    this.ball1 = void 0;\n    this.ball2 = void 0;\n  }\n\n  initialized() {\n    this.ball1 = this.mapData.layers.find(b => b.name === \"ball1\").objects;\n    this.ball2 = this.mapData.layers.find(b => b.name === \"ball2\").objects;\n    console.log(this.ball1);\n  }\n\n  process() {\n    if (this.StateGame.CooldownTime < 0 && this.StateGame.changeTurn) {\n      switch (this.StateGame.WhoisTurning) {\n        case 1:\n          this.StateGame.WhoisTurning = 2;\n\n          for (let i = 3; i >= 0; i--) {\n            this.physicWorld.DestroyBody(this.ballsTeam1[i]);\n            this.ballsTeam1.splice(i, 1);\n            console.log(\"dcm1\");\n          }\n\n          for (let box of this.ball2) {\n            this.ballsTeam2.push(createBall(this.physicWorld, box.x / Constants.METER_TO_PHYSIC_WORLD, (this.MAP_HEIGHT - box.y) / Constants.METER_TO_PHYSIC_WORLD, 0.25));\n          }\n\n          this.StateGame.changeTurn = false;\n          this.originPosition.set(this.ballsTeam2[1].GetPosition().x, this.ballsTeam2[1].GetPosition().y);\n          break;\n\n        case 2:\n          this.StateGame.WhoisTurning = 1;\n\n          for (let i = 3; i >= 0; i--) {\n            this.physicWorld.DestroyBody(this.ballsTeam2[i]);\n            this.ballsTeam2.splice(i, 1);\n            console.log(\"dcm2\");\n          }\n\n          for (let box of this.ball1) {\n            this.ballsTeam1.push(createBall(this.physicWorld, box.x / Constants.METER_TO_PHYSIC_WORLD, (this.MAP_HEIGHT - box.y) / Constants.METER_TO_PHYSIC_WORLD, 0.25));\n          }\n\n          this.StateGame.changeTurn = false;\n          this.originPosition.set(this.ballsTeam1[1].GetPosition().x, this.ballsTeam1[1].GetPosition().y);\n          break;\n\n        default:\n          break;\n      }\n    }\n  }\n\n}, (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"StateGame\", [_dec], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"ballsTeam1\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"ballsTeam2\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"physicWorld\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"originPosition\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"mapData\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class));","map":{"version":3,"names":["System","Inject","Constants","createBall","TurnOfTeam","MAP_HEIGHT","ball1","ball2","initialized","mapData","layers","find","b","name","objects","console","log","process","StateGame","CooldownTime","changeTurn","WhoisTurning","i","physicWorld","DestroyBody","ballsTeam1","splice","box","ballsTeam2","push","x","METER_TO_PHYSIC_WORLD","y","originPosition","set","GetPosition"],"sources":["D:/projects/test-game/src/System/TurnOfTeam.ts"],"sourcesContent":["import { b2Body, b2World } from \"box2d.ts\";\r\nimport { System, Inject } from \"flat-ecs\";\r\nimport { Vector2 } from \"gdxts\";\r\nimport { Constants } from \"../Constant\";\r\nimport { StateGame } from \"../dataGame/stateGame\";\r\nimport { createBall } from \"./utils\";\r\n\r\nexport class TurnOfTeam extends System {\r\n  @Inject(\"StateGame\") StateGame: StateGame;\r\n  @Inject(\"ballsTeam1\") ballsTeam1: b2Body[];\r\n  @Inject(\"ballsTeam2\") ballsTeam2: b2Body[];\r\n  @Inject(\"physicWorld\") physicWorld: b2World;\r\n  @Inject(\"originPosition\") originPosition: Vector2;\r\n  @Inject(\"mapData\") mapData: any;\r\n\r\n  MAP_HEIGHT = 1000;\r\n  ball1: any;\r\n  ball2: any;\r\n\r\n  initialized() {\r\n    this.ball1 = this.mapData.layers.find(\r\n      (b: any) => b.name === \"ball1\"\r\n    ).objects;\r\n    this.ball2 = this.mapData.layers.find(\r\n      (b: any) => b.name === \"ball2\"\r\n    ).objects;\r\n    console.log(this.ball1);\r\n  }\r\n\r\n  process(): void {\r\n    if (this.StateGame.CooldownTime < 0 && this.StateGame.changeTurn) {\r\n      switch (this.StateGame.WhoisTurning) {\r\n        case 1:\r\n          this.StateGame.WhoisTurning = 2;\r\n          for (let i = 3; i >= 0; i--) {\r\n            this.physicWorld.DestroyBody(this.ballsTeam1[i]);\r\n            this.ballsTeam1.splice(i, 1);\r\n            console.log(\"dcm1\");\r\n          }\r\n          for (let box of this.ball2) {\r\n            this.ballsTeam2.push(\r\n              createBall(\r\n                this.physicWorld,\r\n                box.x / Constants.METER_TO_PHYSIC_WORLD,\r\n                (this.MAP_HEIGHT - box.y) / Constants.METER_TO_PHYSIC_WORLD,\r\n                0.25\r\n              )\r\n            );\r\n          }\r\n          this.StateGame.changeTurn = false;\r\n          this.originPosition.set(\r\n            this.ballsTeam2[1].GetPosition().x,\r\n            this.ballsTeam2[1].GetPosition().y\r\n          );\r\n          break;\r\n        case 2:\r\n          this.StateGame.WhoisTurning = 1;\r\n          for (let i = 3; i >= 0; i--) {\r\n            this.physicWorld.DestroyBody(this.ballsTeam2[i]);\r\n            this.ballsTeam2.splice(i, 1);\r\n            console.log(\"dcm2\");\r\n          }\r\n          for (let box of this.ball1) {\r\n            this.ballsTeam1.push(\r\n              createBall(\r\n                this.physicWorld,\r\n                box.x / Constants.METER_TO_PHYSIC_WORLD,\r\n                (this.MAP_HEIGHT - box.y) / Constants.METER_TO_PHYSIC_WORLD,\r\n                0.25\r\n              )\r\n            );\r\n          }\r\n          this.StateGame.changeTurn = false;\r\n          this.originPosition.set(\r\n            this.ballsTeam1[1].GetPosition().x,\r\n            this.ballsTeam1[1].GetPosition().y\r\n          );\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}